{
  "version": 3,
  "sources": ["../../../../../apps/frappe/frappe/public/js/billing.bundle.js"],
  "sourcesContent": ["let frappeCloudBaseEndpoint = \"https://frappecloud.com\";\nlet isFCUser = false;\n\n$(document).ready(function () {\n\tif (\n\t\tfrappe.boot.is_fc_site &&\n\t\tfrappe.boot.setup_complete === 1 &&\n\t\t!frappe.is_mobile() &&\n\t\tfrappe.user.has_role(\"System Manager\")\n\t) {\n\t\tfrappe.call({\n\t\t\tmethod: \"frappe.integrations.frappe_providers.frappecloud_billing.current_site_info\",\n\t\t\tcallback: (r) => {\n\t\t\t\tif (!r?.message) return;\n\n\t\t\t\tconst response = r.message;\n\t\t\t\tconst trial_end_date = new Date(response.trial_end_date);\n\t\t\t\tfrappeCloudBaseEndpoint = response.base_url;\n\t\t\t\tisFCUser = response.is_fc_user;\n\n\t\t\t\tif (response.trial_end_date && trial_end_date > new Date()) {\n\t\t\t\t\t$(\".layout-main-section\").before(\n\t\t\t\t\t\tgenerateTrialSubscriptionBanner(response.trial_end_date)\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\taddManageBillingDropdown();\n\n\t\t\t\t$(\".login-to-fc, .upgrade-plan-button\").on(\"click\", function () {\n\t\t\t\t\topenFrappeCloudDashboard();\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n});\n\nfunction setErrorMessage(message) {\n\t$(\"#fc-login-error\").text(message);\n}\n\nfunction addManageBillingDropdown() {\n\t$(\".dropdown-navbar-user .dropdown-menu .dropdown-divider\").before(\n\t\t`<button class=\"dropdown-item login-to-fc\" target=\"_blank\">Manage Billing</button>`\n\t);\n}\n\nfunction openFrappeCloudDashboard() {\n\twindow.open(`${frappeCloudBaseEndpoint}/dashboard/sites/${frappe.boot.sitename}`, \"_blank\");\n}\n\nfunction generateTrialSubscriptionBanner(trialEndDate) {\n\tconst trial_end_date = new Date(trialEndDate);\n\tconst today = new Date();\n\tconst diffTime = trial_end_date - today;\n\tconst trial_end_days = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n\tconst trial_end_string =\n\t\ttrial_end_days > 1 ? `${trial_end_days} days` : `${trial_end_days} day`;\n\n\treturn $(`\n\t\t\t<style>\n\t\t\t\t.trial-banner {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tjustify-content: space-between;\n\t\t\t\t\talign-items: center;\n\t\t\t\t\tbackground-color: var(--subtle-accent);\n\t\t\t\t\tborder-radius: var(--border-radius-md);\n\t\t\t\t}\n\t\t\t\t.trial-banner > div {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tgap: 8px;\n\t\t\t\t}\n\t\t\t\t.trial-banner .info-icon {\n\t\t\t\t\tmargin: auto 0;\n\t\t\t\t}\n\t\t\t\t.trial-banner > div > div {\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tflex-direction: column;\n\t\t\t\t\tjustify-content: center;\n\t\t\t\t}\n\t\t\t\t.trial-banner .title {\n\t\t\t\t\tfont-size: var(--text-base);\n\t\t\t\t\tfont-weight: var(--weight-semibold);\n\t\t\t\t}\n\t\t\t\t.trial-banner .description {\n\t\t\t\t\tfont-size: var(--text-sm);\n\t\t\t\t\tcolor: var(--text-muted);\n\t\t\t\t}\n\t\t\t\t.trial-banner .upgrade-plan-button {\n\t\t\t\t\theight: fit-content;\n\t\t\t\t\tbackground-color: var(--fg-color);\n\t\t\t\t\tborder: 1px solid var(--gray-300);\n\t\t\t\t\tcolor: var(--gray-800);\n\t\t\t\t\tborder-radius: var(--border-radius);\n\t\t\t\t}\n\t\t\t\t.trial-banner .upgrade-plan-button:hover {\n\t\t\t\t\tborder-color: var(--gray-400);\n\t\t\t\t}\n\t\t\t</style>\n\t\t\t<div class=\"trial-banner px-3 py-2 m-2 mt-4\">\n\t\t\t\t<div>\n\t\t\t\t\t<svg class=\"info-icon\" width=\"18\" height=\"18\" viewBox=\"0 0 16 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t<g clip-path=\"url(#clip0_3360_13841)\">\n\t\t\t\t\t\t\t<path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M8 14.25C11.4518 14.25 14.25 11.4518 14.25 8C14.25 4.54822 11.4518 1.75 8 1.75C4.54822 1.75 1.75 4.54822 1.75 8C1.75 11.4518 4.54822 14.25 8 14.25ZM8 15.25C12.0041 15.25 15.25 12.0041 15.25 8C15.25 3.99594 12.0041 0.75 8 0.75C3.99594 0.75 0.75 3.99594 0.75 8C0.75 12.0041 3.99594 15.25 8 15.25ZM8 5.75C8.48325 5.75 8.875 5.35825 8.875 4.875C8.875 4.39175 8.48325 4 8 4C7.51675 4 7.125 4.39175 7.125 4.875C7.125 5.35825 7.51675 5.75 8 5.75ZM8.5 7.43555C8.5 7.1594 8.27614 6.93555 8 6.93555C7.72386 6.93555 7.5 7.1594 7.5 7.43555V11.143C7.5 11.4191 7.72386 11.643 8 11.643C8.27614 11.643 8.5 11.4191 8.5 11.143V7.43555Z\" fill=\"#171717\"/>\n\t\t\t\t\t\t</g>\n\t\t\t\t\t\t<defs>\n\t\t\t\t\t\t\t<clipPath id=\"clip0_3360_13841\">\n\t\t\t\t\t\t\t\t<rect width=\"16\" height=\"16\" fill=\"white\"/>\n\t\t\t\t\t\t\t</clipPath>\n\t\t\t\t\t\t</defs>\n\t\t\t\t\t</svg>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<span class=\"title\">\n\t\t\t\t\t\t\tYour trial ends in ${trial_end_string}.\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span class=\"description\">\n\t\t\t\t\t\t\t${\n\t\t\t\t\t\t\t\tisFCUser\n\t\t\t\t\t\t\t\t\t? \"Please upgrade for uninterrupted services\"\n\t\t\t\t\t\t\t\t\t: \"Please contact your system administrator to upgrade your plan.\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t${\n\t\t\t\t\tisFCUser\n\t\t\t\t\t\t? `<button type=\"button\"\n\t\t\t\t\tclass=\"upgrade-plan-button px-2 py-1\"\n\t\t\t\t>\n\t\t\t\t\t<svg width=\"17\" height=\"16\" viewBox=\"0 0 17 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t<path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M6.2641 1C5.5758 1 4.97583 1.46845 4.80889 2.1362L3.57555 7.06953C3.33887 8.01625 4.05491 8.93333 5.03077 8.93333H7.50682L6.72168 14.4293C6.68838 14.6624 6.82229 14.8872 7.04319 14.9689C7.26408 15.0507 7.51204 14.9671 7.63849 14.7684L13.2161 6.00354C13.6398 5.33782 13.1616 4.46667 12.3725 4.46667H9.59038L10.3017 1.62127C10.3391 1.4719 10.3055 1.31365 10.2108 1.19229C10.116 1.07094 9.97063 1 9.81666 1H6.2641ZM5.77903 2.37873C5.83468 2.15615 6.03467 2 6.2641 2H9.17627L8.46492 4.8454C8.42758 4.99477 8.46114 5.15302 8.55589 5.27437C8.65064 5.39573 8.79602 5.46667 8.94999 5.46667H12.3725L8.0395 12.2757L8.5783 8.50404C8.5988 8.36056 8.55602 8.21523 8.46105 8.10573C8.36608 7.99623 8.22827 7.93333 8.08332 7.93333H5.03077C4.70548 7.93333 4.4668 7.62764 4.5457 7.31207L5.77903 2.37873Z\" fill=\"currentColor\"/>\n\t\t\t\t\t</svg>\n\t\t\t\t\t${__(\"Upgrade plan\")}\n\t\t\t\t</button>`\n\t\t\t\t\t\t: \"\"\n\t\t\t\t}\n\t\t\t</div>\n`);\n}\n"],
  "mappings": ";;AAAA,MAAI,0BAA0B;AAC9B,MAAI,WAAW;AAEf,IAAE,QAAQ,EAAE,MAAM,WAAY;AAC7B,QACC,OAAO,KAAK,cACZ,OAAO,KAAK,mBAAmB,KAC/B,CAAC,OAAO,UAAU,KAClB,OAAO,KAAK,SAAS,gBAAgB,GACpC;AACD,aAAO,KAAK;AAAA,QACX,QAAQ;AAAA,QACR,UAAU,CAAC,MAAM;AAChB,cAAI,EAAC,uBAAG;AAAS;AAEjB,gBAAM,WAAW,EAAE;AACnB,gBAAM,iBAAiB,IAAI,KAAK,SAAS,cAAc;AACvD,oCAA0B,SAAS;AACnC,qBAAW,SAAS;AAEpB,cAAI,SAAS,kBAAkB,iBAAiB,IAAI,KAAK,GAAG;AAC3D,cAAE,sBAAsB,EAAE;AAAA,cACzB,gCAAgC,SAAS,cAAc;AAAA,YACxD;AAAA,UACD;AACA,mCAAyB;AAEzB,YAAE,oCAAoC,EAAE,GAAG,SAAS,WAAY;AAC/D,qCAAyB;AAAA,UAC1B,CAAC;AAAA,QACF;AAAA,MACD,CAAC;AAAA,IACF;AAAA,EACD,CAAC;AAMD,WAAS,2BAA2B;AACnC,MAAE,wDAAwD,EAAE;AAAA,MAC3D;AAAA,IACD;AAAA,EACD;AAEA,WAAS,2BAA2B;AACnC,WAAO,KAAK,GAAG,2CAA2C,OAAO,KAAK,YAAY,QAAQ;AAAA,EAC3F;AAEA,WAAS,gCAAgC,cAAc;AACtD,UAAM,iBAAiB,IAAI,KAAK,YAAY;AAC5C,UAAM,QAAQ,IAAI,KAAK;AACvB,UAAM,WAAW,iBAAiB;AAClC,UAAM,iBAAiB,KAAK,KAAK,YAAY,MAAO,KAAK,KAAK,GAAG;AACjE,UAAM,mBACL,iBAAiB,IAAI,GAAG,wBAAwB,GAAG;AAEpD,WAAO,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAsDkB;AAAA;AAAA;AAAA,SAIpB,WACG,8CACA;AAAA;AAAA;AAAA;AAAA,MAMN,WACG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAMD,GAAG,cAAc;AAAA,iBAEhB;AAAA;AAAA,CAGP;AAAA,EACD;",
  "names": []
}
